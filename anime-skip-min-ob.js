(function () {
	"use strict";

	const _0x4154bf=_0x43e1;(function(_0x6b336e,_0x250a5d){const _0x568a7a=_0x43e1,_0x580af3=_0x6b336e();while(!![]){try{const _0x170425=-parseInt(_0x568a7a(0xa1))/0x1+parseInt(_0x568a7a(0x78))/0x2*(parseInt(_0x568a7a(0x9b))/0x3)+-parseInt(_0x568a7a(0x80))/0x4*(-parseInt(_0x568a7a(0xbb))/0x5)+parseInt(_0x568a7a(0xb2))/0x6+parseInt(_0x568a7a(0x76))/0x7*(parseInt(_0x568a7a(0xa4))/0x8)+parseInt(_0x568a7a(0x8e))/0x9*(parseInt(_0x568a7a(0xb4))/0xa)+-parseInt(_0x568a7a(0x9c))/0xb;if(_0x170425===_0x250a5d)break;else _0x580af3['push'](_0x580af3['shift']());}catch(_0x1eb23a){_0x580af3['push'](_0x580af3['shift']());}}}(_0x4936,0x5907b));function _0x4936(){const _0x47358c=['segments','Lampa','start','title','Ending','270tuLbYH','playlist','episode','object','trim','searchShows','some','toLowerCase','skip','name','length','original_title','sort','2571rPsocz','13512851phansw','data','New\x20Intro','api','POST','30468XyPrVB','card','message','56wbPLaE','opening','{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20searchEpisodes(search:\x20\x22\x22,\x20showId:\x20\x22','lampa_animeskip_v10','stringify','https://api.anime-skip.com/graphql','credits','json','Recap','stop','movie','\x22,\x20limit:\x201)\x20{\x20id\x20name\x20}\x20}','Loading','isArray','365946BUojzt','ending','170630atxcem','replace','forEach','Activity','number','{\x20searchShows(search:\x20\x22','searchEpisodes','1165zUlLIX','includes','call','ZGfO0sMF3eCwLYf8yMSCJjlynwNGRXWE','351071TVxlGo','type','934BNDxyU','Preview','application/json','original_name','?api_key=','TMDB','Intro','Credits','5140tEhJPB','number_of_seasons','errors','then','play','filter','push','Unknown','timestamps'];_0x4936=function(){return _0x47358c;};return _0x4936();}const API_URL=_0x4154bf(0xa9),CLIENT_ID=_0x4154bf(0x75),SKIP_TYPES=[_0x4154bf(0x7e),_0x4154bf(0x9e),'Op','Opening',_0x4154bf(0xac),_0x4154bf(0x7f),'New\x20Credits','Ed',_0x4154bf(0x8d),_0x4154bf(0x79)];function cleanTitle(_0x412832){const _0x3f46eb=_0x4154bf;if(!_0x412832)return'';return _0x412832[_0x3f46eb(0xb5)](/\(\d{4}\)/g,'')[_0x3f46eb(0xb5)](/\(TV\)/gi,'')['replace'](/Season \d+/gi,'')['replace'](/[:\-]/g,'\x20')[_0x3f46eb(0xb5)](/\s+/g,'\x20')[_0x3f46eb(0x92)]();}async function fetchEnglishTitle(_0x371be0){const _0x59a4a8=_0x4154bf;if(!window[_0x59a4a8(0x8a)]||!window['Lampa'][_0x59a4a8(0x7d)])return null;const _0x186af4=_0x371be0[_0x59a4a8(0x97)]||_0x371be0[_0x59a4a8(0x7b)]?'tv':_0x59a4a8(0xae),_0x1d53c3=_0x371be0['id'];if(!_0x1d53c3)return null;const _0x43ca24=Lampa['TMDB'][_0x59a4a8(0x9f)](_0x186af4+'/'+_0x1d53c3+_0x59a4a8(0x7c)+Lampa[_0x59a4a8(0x7d)]['key']()+'&language=en-US');try{const _0x2c5c01=await fetch(_0x43ca24),_0x49f434=await _0x2c5c01[_0x59a4a8(0xab)]();return _0x49f434[_0x59a4a8(0x97)]||_0x49f434[_0x59a4a8(0x8c)];}catch(_0x4ed61a){return null;}}async function apiRequest(_0x314895){const _0x24c9a1=_0x4154bf;try{const _0x2a6068=await fetch(API_URL,{'method':_0x24c9a1(0xa0),'headers':{'Content-Type':_0x24c9a1(0x7a),'X-Client-ID':CLIENT_ID},'body':JSON[_0x24c9a1(0xa8)]({'query':_0x314895})}),_0x2155ec=await _0x2a6068[_0x24c9a1(0xab)]();if(_0x2155ec[_0x24c9a1(0x82)])throw new Error(_0x2155ec[_0x24c9a1(0x82)][0x0][_0x24c9a1(0xa3)]);return _0x2155ec[_0x24c9a1(0x9d)];}catch(_0x8f6004){throw _0x8f6004;}}async function trySearch(_0x55619f){const _0x3c608c=_0x4154bf;try{const _0x158d6b=_0x3c608c(0xb9)+_0x55619f+_0x3c608c(0xaf),_0x1b7d7f=await apiRequest(_0x158d6b);if(_0x1b7d7f[_0x3c608c(0x93)]&&_0x1b7d7f[_0x3c608c(0x93)][_0x3c608c(0x98)]>0x0)return _0x1b7d7f[_0x3c608c(0x93)][0x0]['id'];}catch(_0x495ac4){}return null;}async function findShowId(_0x358836){const _0x302d37=_0x4154bf;let _0x34b398=[];if(_0x358836[_0x302d37(0x99)])_0x34b398[_0x302d37(0x86)](_0x358836['original_title']);if(_0x358836['original_name'])_0x34b398[_0x302d37(0x86)](_0x358836[_0x302d37(0x7b)]);if(_0x358836[_0x302d37(0x8c)])_0x34b398['push'](_0x358836[_0x302d37(0x8c)]);if(_0x358836[_0x302d37(0x97)])_0x34b398[_0x302d37(0x86)](_0x358836[_0x302d37(0x97)]);_0x34b398=[...new Set(_0x34b398)]['filter'](_0x39e05e=>_0x39e05e);for(const _0x15ae03 of _0x34b398){const _0x3e3afc=await trySearch(_0x15ae03);if(_0x3e3afc)return _0x3e3afc;}const _0x3c1385=await fetchEnglishTitle(_0x358836);if(_0x3c1385){let _0x40d313=await trySearch(_0x3c1385);if(_0x40d313)return _0x40d313;const _0x437a46=cleanTitle(_0x3c1385);if(_0x437a46!==_0x3c1385){_0x40d313=await trySearch(_0x437a46);if(_0x40d313)return _0x40d313;}}return null;}async function getEpisodeData(_0x56d37e,_0x496c75){const _0x637048=_0x4154bf,_0x399c73=_0x637048(0xa6)+_0x56d37e+'\x22,\x20limit:\x20100)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20number\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20timestamps\x20{\x20at\x20type\x20{\x20name\x20}\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0x362b63=await apiRequest(_0x399c73),_0x582321=_0x362b63[_0x637048(0xba)]||[],_0x526a35=_0x582321[_0x637048(0x85)](_0x4ed293=>parseFloat(_0x4ed293[_0x637048(0xb8)])===parseFloat(_0x496c75));if(_0x526a35[_0x637048(0x98)]===0x0)return null;if(_0x526a35[_0x637048(0x98)]===0x1)return _0x526a35[0x0][_0x637048(0x88)];return _0x526a35[_0x637048(0x9a)]((_0x3a6cab,_0x4ec2e1)=>{const _0x251ea6=_0x11603f=>{const _0x1b2132=_0x43e1;if(!_0x11603f[_0x1b2132(0x88)])return 0x0;let _0x10b0eb=0x0;const _0x4a2344=_0x11603f[_0x1b2132(0x88)]['map'](_0x18cb66=>_0x18cb66['type']?_0x18cb66[_0x1b2132(0x77)]['name'][_0x1b2132(0x95)]():'');return _0x4a2344['some'](_0x84082f=>_0x84082f[_0x1b2132(0x73)]('new\x20intro')||_0x84082f[_0x1b2132(0x73)]('new\x20credits'))&&(_0x10b0eb+=0x32),_0x4a2344[_0x1b2132(0x94)](_0x12367b=>_0x12367b[_0x1b2132(0x73)]('intro')||_0x12367b[_0x1b2132(0x73)]('op')||_0x12367b['includes'](_0x1b2132(0xa5)))&&(_0x10b0eb+=0xa),_0x4a2344[_0x1b2132(0x94)](_0x295940=>_0x295940['includes'](_0x1b2132(0xb3))||_0x295940[_0x1b2132(0x73)]('ed')||_0x295940['includes'](_0x1b2132(0xaa)))&&(_0x10b0eb+=0xa),_0x10b0eb+=_0x11603f[_0x1b2132(0x88)][_0x1b2132(0x98)],_0x10b0eb;};return _0x251ea6(_0x4ec2e1)-_0x251ea6(_0x3a6cab);}),_0x526a35[0x0][_0x637048(0x88)];}catch(_0x27f66a){return null;}}function processTimestamps(_0x4944a0){const _0x1b29e5=_0x4154bf;if(!_0x4944a0||!_0x4944a0['length'])return[];_0x4944a0[_0x1b29e5(0x9a)]((_0x19328a,_0x5c4207)=>_0x19328a['at']-_0x5c4207['at']);let _0x28f090=[];for(let _0x6e273a=0x0;_0x6e273a<_0x4944a0[_0x1b29e5(0x98)];_0x6e273a++){const _0x188e02=_0x4944a0[_0x6e273a],_0x5196b2=_0x4944a0[_0x6e273a+0x1],_0x3db34e=_0x188e02[_0x1b29e5(0x77)]?_0x188e02['type'][_0x1b29e5(0x97)]:_0x1b29e5(0x87);SKIP_TYPES[_0x1b29e5(0x94)](_0x56f4c8=>_0x3db34e[_0x1b29e5(0x95)]()['includes'](_0x56f4c8[_0x1b29e5(0x95)]()))&&(_0x5196b2&&_0x28f090['push']({'start':_0x188e02['at'],'end':_0x5196b2['at'],'name':_0x3db34e}));}return _0x28f090;}function _0x43e1(_0x5d18d3,_0x19ecd4){const _0x493627=_0x4936();return _0x43e1=function(_0x43e10d,_0x1f5ebd){_0x43e10d=_0x43e10d-0x73;let _0x177761=_0x493627[_0x43e10d];return _0x177761;},_0x43e1(_0x5d18d3,_0x19ecd4);}function injectSegments(_0x4ac8bc,_0x527992){const _0x59b4b1=_0x4154bf;if(!_0x4ac8bc||typeof _0x4ac8bc!==_0x59b4b1(0x91))return;(!_0x4ac8bc[_0x59b4b1(0x89)]||typeof _0x4ac8bc['segments']!==_0x59b4b1(0x91)||Array['isArray'](_0x4ac8bc[_0x59b4b1(0x89)]))&&(_0x4ac8bc[_0x59b4b1(0x89)]={}),(!_0x4ac8bc[_0x59b4b1(0x89)][_0x59b4b1(0x96)]||!Array['isArray'](_0x4ac8bc[_0x59b4b1(0x89)][_0x59b4b1(0x96)]))&&(_0x4ac8bc[_0x59b4b1(0x89)][_0x59b4b1(0x96)]=[]),_0x527992['forEach'](_0x1b1b18=>{const _0x4ad308=_0x59b4b1,_0x1e10fc=_0x4ac8bc['segments']['skip']['some'](_0x457d8d=>_0x457d8d[_0x4ad308(0x8b)]===_0x1b1b18[_0x4ad308(0x8b)]);if(!_0x1e10fc)_0x4ac8bc[_0x4ad308(0x89)]['skip']['push'](_0x1b1b18);});}async function prepareAnimeSkip(_0x13019d){const _0x22416e=_0x4154bf;let _0x31656f=_0x13019d['movie']||_0x13019d[_0x22416e(0xa2)];if(!_0x31656f){const _0x5219c6=Lampa[_0x22416e(0xb7)]['active']();if(_0x5219c6)_0x31656f=_0x5219c6[_0x22416e(0xae)]||_0x5219c6[_0x22416e(0xa2)];}let _0x5b513d=_0x13019d[_0x22416e(0x90)]||_0x13019d['e']||_0x13019d['episode_number'];if(!_0x31656f)return;if(!_0x5b513d){const _0x85638f=_0x31656f[_0x22416e(0x81)]>0x0||_0x31656f[_0x22416e(0x7b)]&&!_0x31656f[_0x22416e(0x99)];if(!_0x85638f)_0x5b513d=0x1;}if(!_0x5b513d)_0x5b513d=0x1;const _0x4cacdd=await findShowId(_0x31656f);if(!_0x4cacdd)return;const _0x3a3f10=await getEpisodeData(_0x4cacdd,_0x5b513d);if(!_0x3a3f10)return;const _0x39ffb2=processTimestamps(_0x3a3f10);_0x39ffb2['length']>0x0&&(injectSegments(_0x13019d,_0x39ffb2),_0x13019d[_0x22416e(0x8f)]&&Array[_0x22416e(0xb1)](_0x13019d[_0x22416e(0x8f)])&&_0x13019d['playlist'][_0x22416e(0xb6)](_0x575e6d=>{const _0x220ec1=_0x22416e;(_0x575e6d[_0x220ec1(0x90)]===_0x5b513d||_0x575e6d['e']===_0x5b513d)&&injectSegments(_0x575e6d,_0x39ffb2);}));}function startPlugin(){const _0x270c4f=_0x4154bf;if(window[_0x270c4f(0xa7)])return;window[_0x270c4f(0xa7)]=!![];const _0x3e2dcf=Lampa['Player'][_0x270c4f(0x84)];Lampa['Player']['play']=function(_0x12b285){const _0x36a2ef=_0x270c4f;Lampa[_0x36a2ef(0xb0)][_0x36a2ef(0x8b)](()=>{const _0x56f7c9=_0x36a2ef;Lampa[_0x56f7c9(0xb0)][_0x56f7c9(0xad)]();}),prepareAnimeSkip(_0x12b285)[_0x36a2ef(0x83)](()=>{const _0x5136c2=_0x36a2ef;Lampa[_0x5136c2(0xb0)][_0x5136c2(0xad)](),_0x3e2dcf[_0x5136c2(0x74)](this,_0x12b285);})['catch'](_0x27c6c9=>{const _0x1e390d=_0x36a2ef;Lampa[_0x1e390d(0xb0)][_0x1e390d(0xad)](),_0x3e2dcf['call'](this,_0x12b285);});};}

	if (window.Lampa && window.Lampa.Player) {
		startPlugin();
	} else {
		window.document.addEventListener("app_ready", startPlugin);
	}
})();
